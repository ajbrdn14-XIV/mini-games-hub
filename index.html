<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini Games Hub</title>
<meta name="description" content="Play fun mini games including a challenging maze and memory match!" />
<meta name="keywords" content="mini games, maze, memory game, puzzle, fun games" />
<meta name="author" content="Your Name" />
<style>
  :root{
    --gold:#d4af37; --red:#8b0000; --cream:#fff8f0; --shadow:0 8px 22px rgba(0,0,0,.16);
    --radius:16px; --gap:12px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:20px; min-height:100vh;
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
    background:linear-gradient(135deg, ivory,var(--red));
    color:#2c2c2c; display:flex; flex-direction:column; align-items:center; text-align:center;
    overflow-x:hidden;
  }
  h1{font-size:clamp(1.8rem,2.6rem,3rem); margin:8px 0 2px; color:var(--red); animation:fadeIn .9s ease;}
  #subtitle{margin:0 0 12px; opacity:.85; font-size:.95rem}
  @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

  .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .btn{appearance:none;border:none;border-radius:var(--radius);background:var(--gold);color:#fff;padding:12px 18px;font-weight:700;cursor:pointer;box-shadow:var(--shadow);transition:transform .12s,filter .15s}
  .btn:hover{transform:translateY(-2px)}
  .panel{background:rgba(255,255,255,.66);border:2px solid var(--gold);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
  .game-container{display:none;width:min(96vw,960px);margin-top:12px}
  .title{margin:4px 0 10px;font-weight:800;color:var(--red)}

  /* Memory board (5 pairs = 10 cards) */
  #memoryBoard{display:grid;grid-template-columns:repeat(5,min(16vw,120px));gap:var(--gap);place-content:center}
  .card{width:min(16vw,120px);height:min(16vw,120px);display:flex;align-items:center;justify-content:center;
        font-size:clamp(1.6rem,7vw,2.4rem);background:var(--cream);border:2px solid var(--gold);border-radius:14px;cursor:pointer;user-select:none;box-shadow:0 6px 12px rgba(0,0,0,.08)}
  .card.hidden{color:transparent;transform:scale(1);transition:transform .12s}
  .card.revealed{transform:scale(1.03)}

  /* Maze */
  #mazeWrap{position:relative;display:grid;place-items:center}
  canvas#mazeCanvas{width:min(92vmin,720px);height:min(92vmin,720px);border:3px solid var(--gold);border-radius:12px;background:#fff;touch-action:none}

  /* D-Pad for mobile */
  #pad{position:fixed;right:16px;bottom:16px;display:grid;grid-template-columns:64px 64px 64px;grid-template-rows:64px 64px 64px;gap:8px;opacity:.88;z-index:30}
  .padBtn{background:rgba(0,0,0,.35);color:#fff;border:2px solid rgba(255,255,255,.45);border-radius:16px;font-size:1.25rem;display:grid;place-items:center;backdrop-filter:blur(6px);box-shadow:0 6px 14px rgba(0,0,0,.25)}
  .padBtn.blank{visibility:hidden}

  /* Hearts */
  .heart{position:fixed;bottom:-50px;font-size:1.6rem;color:var(--gold);opacity:.85;animation:floatUp 7s linear infinite;pointer-events:none}
  @keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(-105vh) scale(1.4);opacity:0}}

  /* Congrats modal */
  .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.35);z-index:100}
  .modal.show{display:grid;animation:fadeIn .25s}
  .modalCard{background:#fff;border:3px solid var(--gold);border-radius:20px;padding:18px;width:min(92vw,460px);box-shadow:var(--shadow);text-align:center}
  .modalEmoji{font-size:2.2rem}
  .modalTitle{margin:8px 0 6px;color:var(--red);font-weight:800;font-size:1.4rem;animation:pop .6s}
  .modalMsg{margin:0 0 12px}
  @keyframes pop{0%{transform:scale(.6);opacity:0}60%{transform:scale(1.08)}100%{transform:scale(1);opacity:1}}

  /* QR modal (bigger QR) */
  .qrModal .modalCard{display:flex;flex-direction:column;gap:12px;align-items:center;padding:22px}
  .qrLarge{width:min(72vmin,480px);max-width:480px;border-radius:12px;border:6px solid rgba(212,175,55,.12);box-shadow:0 10px 30px rgba(0,0,0,.25);padding:12px;background:linear-gradient(180deg,#fff,#fff3e6)}
  .qrLarge img{width:100%;height:auto;border-radius:8px;display:block;box-shadow:0 6px 18px rgba(0,0,0,.12)}

  @media(max-width:640px){
    #memoryBoard{grid-template-columns:repeat(4,min(22vw,100px))}
    .card{width:min(22vw,100px);height:min(22vw,100px)}
    #pad{right:10px;bottom:10px;grid-template-columns:56px 56px 56px;grid-template-rows:56px 56px 56px;gap:6px}
    .padBtn{border-radius:14px;font-size:1.1rem}
    .qrLarge{width:min(80vmin,360px)}
  }
</style>
</head>
<body>
  <h1>Happy babii-versary ‚ù§Ô∏è</h1>
  <p id="subtitle">Two games, two hearts. Beat both to unlock a surprise.</p>

  <div id="progressTracker">Progress: Memory Match üñ§ | Maze üñ§</div>

  <div id="gameSelection" class="row">
    <button class="btn" id="btnMemory">Play Memory Match üé¥</button>
    <button class="btn" id="btnMaze">Play Maze üåÄ</button>
  </div>

  <!-- Memory -->
  <section id="memoryGame" class="game-container panel">
    <p class="title">Find all the matching pairs! üê±üê±</p>
    <div id="memoryBoard" aria-label="Memory board"></div>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="memRestart">Restart</button>
      <button class="btn" id="memBack">Back to Menu</button>
    </div>
  </section>

  <!-- Maze -->
  <section id="mazeGame" class="game-container panel">
    <p class="title">Guide the Kitty üê±‚Äçüë§ to the üèÅ. Arrow keys or D-Pad. No traps‚Äîjust walls!</p>
    <div id="mazeWrap">
      <canvas id="mazeCanvas" width="880" height="880" aria-label="Maze canvas" role="img"></canvas>
    </div>
    <div class="row" style="margin-top:10px">
      <button class="btn" id="mazeNew">New Maze</button>
      <button class="btn" id="mazeReset">Restart Position</button>
      <button class="btn" id="mazeBack">Back to Menu</button>
    </div>
  </section>

  <div class="win-message" id="winMessage" style="display:none;margin-top:14px">üéâ You beat both games! üéâ</div>

  <!-- QR (hidden until unlocked) -->
  <div id="qrSection" style="display:none;margin-top:18px">
    <button class="btn" id="openQR">Open Surprise</button>
  </div>

  <!-- D-Pad -->
  <div id="pad" aria-hidden="false">
    <div class="padBtn blank"></div>
    <button id="padUp" class="padBtn" aria-label="Up">‚ñ≤</button>
    <div class="padBtn blank"></div>
    <button id="padLeft" class="padBtn" aria-label="Left">‚óÄ</button>
    <div class="padBtn blank"></div>
    <button id="padRight" class="padBtn" aria-label="Right">‚ñ∂</button>
    <div class="padBtn blank"></div>
    <button id="padDown" class="padBtn" aria-label="Down">‚ñº</button>
    <div class="padBtn blank"></div>
  </div>

  <!-- Generic congrats modal (reused) -->
  <div id="congratsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="congratsTitle">
    <div class="modalCard">
      <div class="modalEmoji" id="congratsEmoji">üéâ</div>
      <div class="modalTitle" id="congratsTitle">Congratulations!</div>
      <p class="modalMsg" id="congratsMsg">You did it!</p>
      <div class="row">
        <button class="btn" id="congratsPrimary">OK</button>
        <button class="btn" id="congratsSecondary">Play Again</button>
      </div>
    </div>
  </div>

  <!-- QR modal (centered bigger QR) -->
  <div id="qrModal" class="modal qrModal" aria-hidden="true">
    <div class="modalCard">
      <div style="font-weight:800;color:var(--red)">Surprise!</div>
      <div class="qrLarge" id="qrLarge">
        <!-- Updated QR filename as requested -->
        <img id="qrImg" src="qrchimpX1024-removebg-preview.png" alt="Surprise QR code (tap to open link)" />
      </div>
      <div class="row">
        <a id="qrLink" href="https://gifft.me/o/l/qgf095t59rq4mwtxghx2dzuk" target="_blank" rel="noopener" class="btn" style="text-decoration:none;display:inline-block">Open</a>
        <button class="btn" id="closeQrBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- Floating hearts generator -->
  <script>
    function createHeart(){
      const h=document.createElement('div'); h.className='heart'; h.textContent='üíñ';
      h.style.left = Math.random()*100 + 'vw';
      h.style.animationDuration = (5 + Math.random()*3) + 's';
      document.body.appendChild(h);
      setTimeout(()=>h.remove(),8000);
    }
    setInterval(createHeart,900);
  </script>

<script>
  /* ---------------- state & helpers ---------------- */
  let memoryWon=false, mazeWon=false;
  const progressEl = document.getElementById('progressTracker');
  function updateProgress(){
    const mem = memoryWon ? '<span class="beat">üíò</span>' : 'üñ§';
    const mz = mazeWon ? '<span class="beat">üíò</span>' : 'üñ§';
    progressEl.innerHTML = `Progress: Memory Match ${mem} | Maze ${mz}`;
    if(memoryWon && mazeWon){
      document.getElementById('winMessage').style.display='block';
      document.getElementById('qrSection').style.display='block';
      startFireworks();
    }
  }

  function showGame(id){
    document.getElementById('gameSelection').style.display='none';
    document.querySelectorAll('.game-container').forEach(el=>el.style.display='none');
    document.getElementById(id).style.display='block';
  }
  function backToMenu(){
    document.querySelectorAll('.game-container').forEach(el=>el.style.display='none');
    document.getElementById('gameSelection').style.display='flex';
  }

  /* ========== Congrats modal ========== */
  const modal = document.getElementById('congratsModal');
  const modalEmoji = document.getElementById('congratsEmoji');
  const modalTitle = document.getElementById('congratsTitle');
  const modalMsg = document.getElementById('congratsMsg');
  const modalPrimary = document.getElementById('congratsPrimary');
  const modalSecondary = document.getElementById('congratsSecondary');

  function showCongrats({emoji='üéâ',title='Congratulations!',msg='You did it!',primaryText='OK',onPrimary=()=>{},secondaryText='Play Again',onSecondary=()=>{}}={}){
    modalEmoji.textContent = emoji;
    modalTitle.textContent = title;
    modalMsg.textContent = msg;
    modalPrimary.textContent = primaryText;
    modalSecondary.textContent = secondaryText;
    modalPrimary.onclick = ()=>{ hideModal(); onPrimary(); };
    modalSecondary.onclick = ()=>{ hideModal(); onSecondary(); };
    modal.classList.add('show');
  }
  function hideModal(){ modal.classList.remove('show'); }
  modal.addEventListener('click', (e)=>{ if(e.target===modal) hideModal(); });

  /* -------- Memory Match (5 pairs = 10 cards) -------- */
  const allSymbols = ['üê±','üê∂','üê∞','üêº','ü¶ä','üêª','üê®','üêØ','ü¶Å','üêÆ','üê∑','üê∏'];
  const memoryBoard = document.getElementById('memoryBoard');
  let firstCard = null, memLock = false;

  function buildCard(sym){
    const d = document.createElement('div');
    d.className = 'card hidden';
    d.dataset.symbol = sym;
    d.textContent = sym;
    return d;
  }

  function resetMemory(){
    firstCard = null; memLock = false; memoryWon = false; updateProgress();
    memoryBoard.innerHTML = '';
    const picks = allSymbols.sort(()=>Math.random()-.5).slice(0,5); // 5 pairs
    const deck = [...picks, ...picks].sort(()=>Math.random()-.5);
    deck.forEach(sym => memoryBoard.appendChild(buildCard(sym)));
    memoryBoard.querySelectorAll('.card').forEach(card=>{
      card.onclick = ()=>{
        if(memLock || !card.classList.contains('hidden')) return;
        card.classList.remove('hidden');
        card.classList.add('revealed');
        setTimeout(()=>card.classList.remove('revealed'), 260);
        if(!firstCard){ firstCard = card; return; }
        if(firstCard.dataset.symbol === card.dataset.symbol){
          firstCard = null;
          if([...memoryBoard.children].every(c=>!c.classList.contains('hidden'))){
            memoryWon = true; updateProgress();
            showCongrats({
              emoji:'üíñ',
              title:'Memory Master!',
              msg:'You matched all 5 pairs! Want to try the maze now?',
              primaryText:'Play Maze üåÄ',
              onPrimary: ()=> showGame('mazeGame'),
              secondaryText:'Replay Memory',
              onSecondary: ()=> resetMemory()
            });
          }
        } else {
          memLock = true;
          setTimeout(()=>{
            firstCard.classList.add('hidden');
            card.classList.add('hidden');
            firstCard = null; memLock = false;
          }, 650);
        }
      };
    });
  }

  /* -------- Maze (randomized, no traps, extra walls, smooth movement) -------- */
  const canvas = document.getElementById('mazeCanvas');
  const ctx = canvas.getContext('2d');

  function fitCanvas(){ 
    const dpr = window.devicePixelRatio || 1;
    const r = canvas.getBoundingClientRect();
    canvas.width = Math.round(r.width * dpr);
    canvas.height = Math.round(r.height * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  new ResizeObserver(fitCanvas).observe(canvas);
  fitCanvas();

  let N = 14; // bigger maze
  const directions = [[0,-1],[1,0],[0,1],[-1,0]];
  let H, V; // horizontal/vertical walls
  let start = {x:0,y:0}, goal = {x:N-1,y:N-1};

  function carveMaze(){
    H = Array.from({length:N+1}, ()=> Array(N).fill(true));
    V = Array.from({length:N}, ()=> Array(N+1).fill(true));
    const visited = Array.from({length:N}, ()=> Array(N).fill(false));
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
    (function dfs(x,y){
      visited[y][x]=true;
      shuffle(directions.slice()).forEach(([dx,dy])=>{
        const nx=x+dx, ny=y+dy;
        if(nx>=0&&ny>=0&&nx<N&&ny<N && !visited[ny][nx]){
          if(dx===1) V[y][x+1]=false; if(dx===-1) V[y][x]=false;
          if(dy===1) H[y+1][x]=false; if(dy===-1) H[y][x]=false;
          dfs(nx,ny);
        }
      });
    })(0,0);

    // add a modest number of extra walls to increase difficulty
    for(let k=0;k<Math.floor(N*1.4);k++){
      if(Math.random()<.55){
        const y = Math.floor(Math.random()*N), x = 1+Math.floor(Math.random()*(N-1));
        V[y][x] = true;
      } else {
        const y = 1+Math.floor(Math.random()*(N-1)), x = Math.floor(Math.random()*N);
        H[y][x] = true;
      }
    }
  }

  // player & movement
  let player = {x:0,y:0,fx:0,fy:0}, moving=false, moveStart=0, fromX=0, fromY=0, toX=0, toY=0;
  const MOVE_MS = 140;

  function canMove(dx,dy){
    const nx=player.x+dx, ny=player.y+dy;
    if(nx<0||ny<0||nx>=N||ny>=N) return false;
    if(dx===1 && V[player.y][player.x+1]) return false;
    if(dx===-1 && V[player.y][player.x]) return false;
    if(dy===1 && H[player.y+1][player.x]) return false;
    if(dy===-1 && H[player.y][player.x]) return false;
    return true;
  }
  function tryMove(dx,dy){
    if(moving || mazeWon) return;
    if(!canMove(dx,dy)) return;
    const nx=player.x+dx, ny=player.y+dy;
    moving=true; moveStart=performance.now();
    fromX=player.x; fromY=player.y; toX=nx; toY=ny;
    player.x=nx; player.y=ny;
    if(navigator.vibrate) navigator.vibrate(12);
  }

  function drawMaze(){
    const cs = canvas.getBoundingClientRect().width / N;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.lineWidth = Math.max(2, Math.floor(cs*0.05)); ctx.strokeStyle = '#8b0000';
    ctx.beginPath();
    ctx.rect(0,0,N*cs,N*cs);
    for(let y=0;y<=N;y++){
      for(let x=0;x<N;x++){ if(H[y][x]){ ctx.moveTo(x*cs,y*cs); ctx.lineTo((x+1)*cs,y*cs); } }
    }
    for(let y=0;y<N;y++){
      for(let x=0;x<=N;x++){ if(V[y][x]){ ctx.moveTo(x*cs,y*cs); ctx.lineTo(x*cs,(y+1)*cs); } }
    }
    ctx.stroke();

    // goal
    ctx.font = `${Math.floor(cs*0.6)}px system-ui, 'Apple Color Emoji','Segoe UI Emoji'`;
    ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.fillText('üèÅ', goal.x*cs + cs/2, goal.y*cs + cs/2);

    // player (smooth)
    const px = player.fx*cs + cs/2;
    const py = player.fy*cs + cs/2 + (moving ? Math.sin(performance.now()/90)*cs*0.06 : 0);
    ctx.fillText('üê±‚Äçüë§', px, py);
  }

  function step(now){
    if(moving){
      const t=Math.min(1,(now-moveStart)/MOVE_MS);
      const e = t<.5 ? 2*t*t : -1+(4-2*t)*t;
      player.fx = fromX + (toX-fromX)*e;
      player.fy = fromY + (toY-fromY)*e;
      if(t>=1){ moving=false; player.fx=player.x; player.fy=player.y; afterArrive(); }
    }
    drawMaze();
    requestAnimationFrame(step);
  }

  function afterArrive(){
    if(player.x===goal.x && player.y===goal.y){
      mazeWon=true; updateProgress();
      showCongrats({
        emoji:'üö©', title:'Maze Conquered!', msg:'You found the goal! Try a new layout or replay.',
        primaryText:'New Maze', onPrimary:()=> newMaze(),
        secondaryText:'Back to Menu', onSecondary:()=> backToMenu()
      });
    }
  }

  function resetMaze(){ player={x:start.x,y:start.y,fx:start.x,fy:start.y}; mazeWon=false; updateProgress(); drawMaze(); }

  function newMaze(){
    carveMaze();
    start={x:0,y:0}; goal={x:N-1,y:N-1};
    resetMaze();
  }

  /* Keyboard & D-Pad */
  document.addEventListener('keydown',(e)=>{
    if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d','W','A','S','D'].includes(e.key)) e.preventDefault();
    if(e.key==='ArrowUp' || e.key==='w' || e.key==='W') tryMove(0,-1);
    if(e.key==='ArrowDown' || e.key==='s' || e.key==='S') tryMove(0,1);
    if(e.key==='ArrowLeft' || e.key==='a' || e.key==='A') tryMove(-1,0);
    if(e.key==='ArrowRight' || e.key==='d' || e.key==='D') tryMove(1,0);
  });

  function pad(el,dx,dy){
    const fire = ()=> tryMove(dx,dy);
    el.addEventListener('click',fire);
    el.addEventListener('touchstart', (ev)=>{ ev.preventDefault(); fire(); }, {passive:false});
  }
  pad(document.getElementById('padUp'),0,-1);
  pad(document.getElementById('padDown'),0,1);
  pad(document.getElementById('padLeft'),-1,0);
  pad(document.getElementById('padRight'),1,0);

  /* init */
  newMaze();
  requestAnimationFrame(step);

  /* Fireworks */
  function startFireworks(){
    const fw=document.createElement('canvas'); fw.width=innerWidth; fw.height=innerHeight;
    Object.assign(fw.style,{position:'fixed',left:0,top:0,pointerEvents:'none',zIndex:200});
    document.body.appendChild(fw);
    const cx=fw.getContext('2d'); const pts=[];
    function boom(x,y){ for(let i=0;i<80;i++){ pts.push({x,y,a:Math.random()*Math.PI*2,s:Math.random()*4+1.5,l:100}); } }
    const int = setInterval(()=>boom(Math.random()*fw.width, Math.random()*fw.height*.7+50),900);
    function tick(){
      cx.clearRect(0,0,fw.width,fw.height);
      for(let i=0;i<pts.length;i++){
        const p=pts[i]; p.x+=Math.cos(p.a)*p.s; p.y+=Math.sin(p.a)*p.s; p.l--;
        cx.fillStyle = `hsl(${(p.l*3)%360} 100% 50%)`;
        cx.fillRect(p.x,p.y,3,3);
        if(p.l<=0){ pts.splice(i,1); i--; }
      }
      requestAnimationFrame(tick);
    }
    tick();
    setTimeout(()=>{ clearInterval(int); setTimeout(()=>fw.remove(),2500); },6000);
  }
  window.startFireworks = startFireworks;

  /* ========== UI wiring ========== */
  // menu buttons
  document.getElementById('btnMemory').onclick = ()=> showGame('memoryGame');
  document.getElementById('btnMaze').onclick = ()=> showGame('mazeGame');
  document.getElementById('memBack').onclick = backToMenu;
  document.getElementById('memRestart').onclick = resetMemory;
  document.getElementById('mazeBack').onclick = backToMenu;
  document.getElementById('mazeNew').onclick = newMaze;
  document.getElementById('mazeReset').onclick = resetMaze;

  // QR popup logic
  const qrModal = document.getElementById('qrModal');
  const qrSection = document.getElementById('qrSection');
  const openQR = document.getElementById('openQR');
  const closeQrBtn = document.getElementById('closeQrBtn');
  const qrImg = document.getElementById('qrImg');
  const qrLink = document.getElementById('qrLink');

  openQR.onclick = ()=> { qrModal.classList.add('show'); qrModal.setAttribute('aria-hidden','false'); };
  closeQrBtn.onclick = ()=> { qrModal.classList.remove('show'); qrModal.setAttribute('aria-hidden','true'); };
  qrModal.addEventListener('click', (e)=>{ if(e.target===qrModal) { qrModal.classList.remove('show'); qrModal.setAttribute('aria-hidden','true'); } });
  qrImg.style.cursor = 'pointer';
  qrImg.addEventListener('click', ()=> window.open(qrLink.href,'_blank','noopener'));

  /* Initialize memory board */
  resetMemory();
</script>
</body>
</html>
